//////////////////////////////////////////////////////////////////////////////////////////
//                                                                                      //
//                   (C) VESTA 2019 - Planbureau voor de Leefomgeving                   //
//                                                                                      //
//////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////
//                                                                                      //
//       Deze DMS-file wordt aangeroepen door ScenarioSpecs.dms.                        //
//       In deze configuratiefile wordt de Nieuwbouw geconfigureerd.                    //
//       Nieuwbouw is gedefinieerd als nieuwe bebouwing in nieuwe gebieden).            //
//                                                                                      //
//////////////////////////////////////////////////////////////////////////////////////////

Container Nieuwbouw
{
	Container Woning := for_each_ne(Classifications/ZichtJaar/Name
			,  Classifications/ZichtJaar/HasMutations
			? 'CalculationSchemes/NieuwbouwWoningOperaties/Unite(PerGrid/' + Classifications/ZichtJaar/Name+ ')'
			: 'CalculationSchemes/LegeBebouwingsComponent(Classifications/WoningtypeNieuwbouw)'
			)
	{
		container PerGrid := for_each_ne(Classifications/combines/ZichtJaarWonen/HasMutations ? Classifications/combines/ZichtJaarWonen/Name : ''
				, 'CalculationSchemes/NieuwbouwWoningOperaties/Select(Invoer/RuimtelijkeData/Nieuwbouw/Woning/' + Classifications/combines/ZichtJaarWonen/Name + 
				  '[nrAsl], value(' + string(Classifications/combines/ZichtJaarWonen/WoningtypeNieuwbouw_rel) + ', Classifications/WoningtypeNieuwbouw) '+
				  ', value(' + string(Classifications/combines/ZichtJaarWonen/ZichtJaar_jaar )+ ',units/yr_uint16)'+
				  ')'
				);
	}

	Container Utiliteit := for_each_ne(Classifications/ZichtJaar/Name
			,  Classifications/ZichtJaar/HasMutations
			? 'CalculationSchemes/NieuwbouwUtilOperaties/Unite(PerGrid/' + Classifications/ZichtJaar/Name+ ')'
			: 'CalculationSchemes/LegeBebouwingsComponent(Classifications/UtilTypeNieuwbouw)'
			)
	{
		container PerGrid := for_each_ne(Classifications/combines/ZichtJaarUtiliteit/HasMutations ?  Classifications/combines/ZichtJaarUtiliteit/Name : ''
				, 'CalculationSchemes/NieuwbouwUtilOperaties/Select(NieuwbouwUtil/' + Classifications/combines/ZichtJaarUtiliteit/Name + 
				  ', ' + quote(Classifications/combines/ZichtJaarUtiliteit/utiliteit_Name) + 
				  ', value(' + string(Classifications/combines/ZichtJaarUtiliteit/ZichtJaar_jaar)+ ',units/yr_uint16)'+
				  ')'
				);
	}

	Container GlasTuinBouw:= for_each_ne( Classifications/ZichtJaar/HasMutations ? Classifications/ZichtJaar/Name : '' 
			,'CalculationSchemes/NieuwbouwGlTbOperaties/MaakMutatieNieuwbouw(RuimtelijkeData/GlasTuinBouw/Bij_studiegebied/' + Classifications/ZichtJaar/Name
				+ ',RuimtelijkeData/GlasTuinBouw/Af_studiegebied/'  + Classifications/ZichtJaar/Name
				+ ',value(' + string(Classifications/ZichtJaar/jaar )+ ',units/yr_uint16)'
//				+ ','+MakeDefined(Classifications/ZichtJaar/Name[id(Classifications/ZichtJaar)-1]+'/Nieuwbouw/BebouwingsObject','Huidig/LegeNieuwbouw/results/BebouwingsObject')
			+')'
		)
	{
		container StartJaar := CalculationSchemes/LegeBebouwingsComponent(classifications/GLTB);
	}
}